<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Debugging JavaScript Example</title>
</head>
<body>
<div class="container">
    <h1>Object Constructor Function Example</h1>
    <form id="person-form">
        <input type="text" id="firstName" placeholder="First Name" required>
        <input type="text" id="lastName" placeholder="Last Name" required>
        <input type="number" id="age" placeholder="Age" required>
        <input type="text" id="occupation" placeholder="Occupation" required>
        <button type="button" id="addPersonBtn">Add Person</button>
    </form>
    <p id="people-output"></p>
</div>

<script>
    console.log("Script is running!"); // Check if the script is loading

    // Constructor function for creating Person objects
    function Person(firstName, lastName, age, occupation) {
        this.firstName = firstName;
        this.lastName = lastName;
        this.age = age;
        this.occupation = occupation;
        this.fullName = function() {
            return this.firstName + " " + this.lastName;
        };
    }

    let people = []; // Array to store people objects

    // Function to add a person from input
    function addPersonFromInput() {
        console.log("addPersonFromInput function called!"); // Check if the function is triggered

        // Get the values from the input fields
        let firstName = document.getElementById("firstName").value;
        let lastName = document.getElementById("lastName").value;
        let age = document.getElementById("age").value;
        let occupation = document.getElementById("occupation").value;

        // Log the values to see if they are captured
        console.log("Form Values:", { firstName, lastName, age, occupation });

        // Add validation to ensure all fields are filled
        if (firstName && lastName && age && occupation) {
            let newPerson = new Person(firstName, lastName, age, occupation);
            people.push(newPerson); // Add the new person to the array

            displayPeople(); // Update the display

            // Reset the form
            document.getElementById("person-form").reset();
        } else {
            alert("Please fill out all fields."); // Alert if any fields are missing
        }
    }

    // Function to display all persons
    function displayPeople() {
        console.log("Displaying people:", people); // Log to ensure it's called

        let output = "<h2>People List:</h2>";
        people.forEach(person => {
            output += `Name: ${person.fullName()}<br>Age: ${person.age}<br>Occupation: ${person.occupation}<br><br>`;
        });

        document.getElementById("people-output").innerHTML = output;
    }

    // Attach the event listener to the button
    document.getElementById("addPersonBtn").addEventListener("click", addPersonFromInput);
</script>
</body>
</html>
